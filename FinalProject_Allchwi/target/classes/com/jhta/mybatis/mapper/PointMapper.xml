<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jhta.mybatis.mapper.PointMapper">
	<!--3 포인트번호, 로그인번호(참조), 포인트금액, 포인트적립 및 사용내용, 포인트적립일, 포인트타입(사용[u], 적립[s])-->
	<insert id="addPoint" parameterType="pv">
		insert into point values (0, #{ml_num}, #{point}, #{point_name}, now(), #{point_type})
	</insert>
		
	<select id="selectPoint" parameterType="hashmap">
		select l.ml_num, i.mb_name, l.id, p.point_num, p.point, p.point_type, p.point_name, p.point_regdate
		from member_login l, member_info i, point p  
		where l.ml_num = i.ml_num and l.ml_num = p.login_num and l.ml_num = 1
		<if test="point_type != null and point_type != ''">
			and point_type = #{point_type}
		</if>
	</select>
</mapper>









